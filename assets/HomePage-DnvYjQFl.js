import{u as N,c as p,e as k,t as f,i,a as u,f as E,S as $,F as L,b as A,s as D,g as F,d as w}from"./index-CkHjE-rj.js";import{A as H}from"./components-ZFfahQsh.js";var I=f('<div class="flex justify-center items-center fixed top-6 right-6 rounded-full w-12 h-12 border"><p>'),R=f('<div class="flex flex-col justify-center items-center h-screen w-screen"><form class="flex flex-col"><label class="text-3xl mb-8">Hello! How can I help with your career?</label><input class="border rounded w-lg h-10"placeholder="Ask me anything...">'),T=f('<div class="flex flex-col items-center"><form class="flex flex-col fixed bottom-20"><input class="border rounded w-lg h-10"placeholder="Ask me anything...">'),j=f("<div>"),q=f("<p>");const z=()=>{const g=N(),[b,_]=p(""),[y,C]=p(""),[o,v]=p([]);let h="";const S=async()=>{const r=localStorage.getItem("accessToken");r===null&&g("/login");const e=await fetch(`${w}/api/v1/users/name`,{headers:{Authorization:`Bearer ${r}`}});if(e.ok){const t=(await e.text()).split(`
`);_(t[0]),C(t[1])}else e.status===401&&g("/login")};k(()=>{S()});const x=async r=>{r.preventDefault(),document.querySelector("form").reset(),v(o().concat([h,""]));const t=(await fetch(`${w}/api/v1/chat`,{method:"POST",body:h})).body.getReader(),d=new TextDecoder("utf-8"),a=o().length-1;let s=!1;for(;!s;){const{value:n,done:l}=await t.read();if(s=l,n){const m=d.decode(n,{stream:!0}),c=[...o()];c[a]=c[a]+m,v(c)}}};return(()=>{var r=j();return i(r,u($,{get when(){return o().length===0},get children(){return[u(E,{get children(){return u(H,{href:"/profile",get children(){var e=I(),t=e.firstChild;return i(t,()=>b().toUpperCase()[0],null),i(t,()=>y().toUpperCase()[0],null),e}})}}),(()=>{var e=R(),t=e.firstChild,d=t.firstChild,a=d.nextSibling;return t.addEventListener("submit",x),a.addEventListener("change",s=>{h=s.target.value}),e})()]}}),null),i(r,u($,{get when(){return o().length!==0},get children(){var e=T(),t=e.firstChild,d=t.firstChild;return i(e,u(L,{get each(){return o()},children:(a,s)=>(()=>{var n=q();return i(n,a),A(l=>{var m=`top: ${s()*80}px`,c=`fixed border rounded p-4 m-4 ${s()%2===0?"right-0":"left-0"}`;return l.e=D(n,m,l.e),c!==l.t&&F(n,l.t=c),l},{e:void 0,t:void 0}),n})()}),t),t.addEventListener("submit",x),d.addEventListener("change",a=>{h=a.target.value}),e}}),null),r})()};export{z as default};
