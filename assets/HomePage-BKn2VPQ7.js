import{m as y,s as N,e as E,f as P,g as A,h as R,n as L,t as m,j as D,u as H,c as _,k as I,i as h,a as g,l as j,S,F,b as T,o as U,p as q,d as k}from"./index-Bg1ecEPQ.js";var z=m("<a>");function O(e){e=y({inactiveClass:"inactive",activeClass:"active"},e);const[,p]=N(e,["href","state","class","activeClass","inactiveClass","end"]),$=E(()=>e.href),x=P($),C=A(),s=R(()=>{const n=$();if(n===void 0)return[!1,!1];const r=L(n.split(/[?#]/,1)[0]).toLowerCase(),u=decodeURI(L(C.pathname).toLowerCase());return[e.end?r===u:u.startsWith(r+"/")||u===r,r===u]});return(()=>{var n=z();return D(n,y(p,{get href(){return x()||e.href},get state(){return JSON.stringify(e.state)},get classList(){return{...e.class&&{[e.class]:!0},[e.inactiveClass]:!s()[0],[e.activeClass]:s()[0],...p.classList}},link:"",get"aria-current"(){return s()[1]?"page":void 0}}),!1),n})()}var B=m('<div class="flex justify-center items-center fixed top-6 right-6 rounded-full w-12 h-12 border"><p>'),J=m('<div class="flex flex-col justify-center items-center h-screen w-screen"><form class="flex flex-col"><label class="text-3xl mb-8">Hello! How can I help with your career?</label><input class="border rounded w-lg h-10"placeholder="Ask me anything...">'),M=m('<div class="flex flex-col items-center"><form class="flex flex-col fixed bottom-20"><input class="border rounded w-lg h-10"placeholder="Ask me anything...">'),V=m("<div>"),W=m("<p>");const K=()=>{const e=H(),[p,$]=_(""),[x,C]=_(""),[s,n]=_([]);let r="";const u=async()=>{const l=localStorage.getItem("accessToken");l===null&&e("/login");const t=await fetch(`${k}/api/v1/users/name`,{headers:{Authorization:`Bearer ${l}`}});if(t.ok){const a=(await t.text()).split(`
`);$(a[0]),C(a[1])}else t.status===401&&e("/login")};I(()=>{u()});const b=async l=>{l.preventDefault(),document.querySelector("form").reset(),n(s().concat([r,""]));const a=(await fetch(`${k}/api/v1/chat`,{method:"POST",body:r})).body.getReader(),v=new TextDecoder("utf-8"),c=s().length-1;let i=!1;for(;!i;){const{value:o,done:d}=await a.read();if(i=d,o){const w=v.decode(o,{stream:!0}),f=[...s()];f[c]=f[c]+w,n(f)}}};return(()=>{var l=V();return h(l,g(S,{get when(){return s().length===0},get children(){return[g(j,{get children(){return g(O,{href:"/profile",get children(){var t=B(),a=t.firstChild;return h(a,()=>p().toUpperCase()[0],null),h(a,()=>x().toUpperCase()[0],null),t}})}}),(()=>{var t=J(),a=t.firstChild,v=a.firstChild,c=v.nextSibling;return a.addEventListener("submit",b),c.addEventListener("change",i=>{r=i.target.value}),t})()]}}),null),h(l,g(S,{get when(){return s().length!==0},get children(){var t=M(),a=t.firstChild,v=a.firstChild;return h(t,g(F,{get each(){return s()},children:(c,i)=>(()=>{var o=W();return h(o,c),T(d=>{var w=`top: ${i()*80}px`,f=`fixed border rounded p-4 m-4 ${i()%2===0?"right-0":"left-0"}`;return d.e=U(o,w,d.e),f!==d.t&&q(o,d.t=f),d},{e:void 0,t:void 0}),o})()}),a),a.addEventListener("submit",b),v.addEventListener("change",c=>{r=c.target.value}),t}}),null),l})()};export{K as default};
