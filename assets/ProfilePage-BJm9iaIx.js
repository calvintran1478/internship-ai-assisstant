import{u as z,c as E,q as w,t as l,i as d,a as u,S,b as y,r as q,f as C,v as k,d as f}from"./index-BjrXbiDH.js";var M=l('<iframe class="w-[400px] h-[500px] m-6 border">'),O=l('<select class="border h-8"name=concentration id=concentration><option value>--Please choose an option--</option><option value=applied-mathematics>Applied Mathematics</option><option value=artificial-intelligence>Artificial Intelligence</option><option value=artificial-intelligence-healthcare>Artificial Intelligence in Healthcare</option><option value=computer-science>Computer Science</option><option value=data-science>Data Science</option><option value=data-science-biology>Data Science for Biology</option><option value=quantum-computing>Quantum Computing'),H=l('<span class="text-lg mx-6">(Unsaved)'),N=l('<div class="flex flex-col"><h1 class="text-3xl font-medium m-6">Profile Page</h1><h2 class="text-2xl font-medium mx-6">Resume</h2><div class="flex justify-center"><hr class="w-96/100 my-4"></div><form class="flex items-center"><input class="border w-52 h-8 mx-6"type=file id=resume><button class="border w-20 h-8">Upload</button></form><h2 class="text-2xl font-medium mx-6 mt-4">MScAC Details</h2><div class="flex justify-center"><hr class="w-96/100 my-4"></div><form><div class="flex items-center"><label class="mx-6 text-xl">Concentration:</label><button class="border w-12 h-8 ml-8">Save</button></div></form><div class=h-56>'),Q=l("<p>Loading...");const G=()=>{const a=z();let r,c;const[R,p]=E(!1),A=async()=>{const t=localStorage.getItem("accessToken");t===null&&a("/login");const e=await fetch(`${f}/api/v1/users/concentration`,{headers:{Authorization:`Bearer ${t}`}});if(e.ok)return e.text();if(e.status===401)a("/login");else if(e.status===404)return""},B=()=>{p(c.value!==h())},[h]=w(A),I=async t=>{t.preventDefault();const e=localStorage.getItem("accessToken");e===null&&a("/login");const n=await fetch(`${f}/api/v1/users/concentration`,{method:"PUT",headers:{Authorization:`Bearer ${e}`},body:c.value});n.ok?p(!1):n.status===401&&a("/login")},L=async()=>{const t=localStorage.getItem("accessToken");t===null&&a("/login");const e=await fetch(`${f}/api/v1/resume`,{headers:{Authorization:`Bearer ${t}`}});if(e.ok){const n=await e.arrayBuffer(),s=new Blob([n]);return window.URL.createObjectURL(s)}else if(e.status===401)a("/login");else if(e.status===404)return""},[g,U]=w(L),P=async t=>{t.preventDefault();const e=localStorage.getItem("accessToken");e===null&&a("/login");const n=await fetch(`${f}/api/v1/resume`,{method:"PUT",headers:{Authorization:`Bearer ${e}`},body:r.files[0]});if(n.ok){const s=new Blob([r.files[0]]),i=window.URL.createObjectURL(s);U.mutate(i)}else n.status===401&&a("/login")};return(()=>{var t=N(),e=t.firstChild,n=e.nextSibling,s=n.nextSibling,i=s.nextSibling,v=i.firstChild,b=i.nextSibling,D=b.nextSibling,x=D.nextSibling,m=x.firstChild,T=m.firstChild,j=T.nextSibling;i.addEventListener("submit",P);var $=r;return typeof $=="function"?k($,v):r=v,d(t,u(C,{get fallback(){return Q()},get children(){return u(S,{get when(){return g()!==""},get children(){var o=M();return y(()=>q(o,"src",g())),o}})}}),b),x.addEventListener("submit",I),d(m,u(C,{get children(){var o=O();o.addEventListener("change",B);var _=c;return typeof _=="function"?k(_,o):c=o,y(()=>o.value=h()),o}}),j),d(m,u(S,{get when(){return R()},get children(){return H()}}),null),t})()};export{G as default};
